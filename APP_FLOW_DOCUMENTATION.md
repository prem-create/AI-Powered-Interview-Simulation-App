# ğŸ¯ AI Interview Coach - Complete Application Flow Documentation

## ğŸ“‹ Table of Contents
1. [Application Overview](#application-overview)
2. [Architecture Pattern](#architecture-pattern)
3. [Complete User Flow](#complete-user-flow)
4. [Feature Deep Dive](#feature-deep-dive)
5. [State Management](#state-management)
6. [AI Integration](#ai-integration)
7. [File Structure](#file-structure)
8. [Future Enhancements](#future-enhancements)

---

## ğŸ¨ Application Overview

**AI Interview Coach** is a Flutter-based interview practice platform that uses Google's Gemini AI to simulate realistic interview experiences. The app offers three distinct practice modes:

1. **Camera Interview** - AI-powered interview with text-to-speech
2. **Talk to AI** - Casual chat-based interview practice
3. **MCQ Quiz** - Multiple choice question assessment

---

## ğŸ—ï¸ Architecture Pattern

### BLoC Pattern (Business Logic Component)
The app uses the BLoC pattern for state management, separating business logic from UI:

```
UI Layer (Widgets)
    â†“
BLoC Layer (Business Logic)
    â†“
Repository Layer (Data/API)
    â†“
External Services (Gemini AI)
```

### Key Benefits:
- **Separation of Concerns**: UI doesn't know about business logic
- **Testability**: Easy to unit test business logic
- **Reusability**: BLoCs can be reused across different screens
- **Predictable State**: Clear state transitions

---

## ğŸ”„ Complete User Flow

### 1. App Launch
```
main.dart
  â†“
MainApp (MaterialApp with routing)
  â†“
ScreenUtilInit (Responsive design setup)
  â†“
GoRouter (Navigation configuration)
  â†“
Home Page (Landing screen)
```

### 2. Home Page Flow
```
Home Widget
  â†“
HomeBloc created
  â†“
ApiKeyEvent triggered (validates API key)
  â†“
Responsive layout rendered (Mobile/Desktop)
  â†“
User sees three options:
  - Camera Interview
  - Talk to AI
  - MCQ Quiz
```

### 3. Camera Interview Flow
```
User clicks "Camera Interview"
  â†“
HomeBloc emits CameraInterviewActionState
  â†“
Navigate to /CameraInterview
  â†“
CameraInterview page loads
  â†“
CameraInterviewBloc created
  â†“
User enters details (name, topic, difficulty)
  â†“
StartCameraInterviewButtonTappedEvent
  â†“
GeminiRepository.startInterview() - Initialize with prompt
  â†“
GeminiRepository.sendToGemini() - Get first question
  â†“
CameraInterviewLoadingSuccessState emitted
  â†“
UI displays question
  â†“
SpeakTtsEvent triggered - TTS speaks question
  â†“
User types answer
  â†“
CandidateAnswerSubmittedEvent
  â†“
Answer sent to Gemini
  â†“
Next question received
  â†“
Repeat until user clicks "End Interview"
  â†“
Final report generated by AI
  â†“
CameraInterviewResultState emitted
  â†“
Display comprehensive feedback
```

### 4. Talk to AI Flow
```
User clicks "Talk to AI"
  â†“
Navigate to /startTalkToAi
  â†“
StartTalkToAi page loads
  â†“
TalkToAiBloc created
  â†“
ChatStartedEvent triggered
  â†“
GeminiRepository.startChat() - Initialize conversational mode
  â†“
Welcome message received from AI
  â†“
MessageSentSuccessState emitted
  â†“
Chat interface displayed
  â†“
User types message
  â†“
SendButtonTappedEvent
  â†“
Message added to chat history
  â†“
Sent to Gemini AI
  â†“
AI response received
  â†“
Response added to chat history
  â†“
MessageSentSuccessState emitted
  â†“
UI updates with new messages
  â†“
Conversation continues...
```

### 5. MCQ Quiz Flow
```
User clicks "MCQ Quiz"
  â†“
Navigate to /Mcq
  â†“
QuizScreen loads
  â†“
First question displayed with options
  â†“
User selects an answer
  â†“
pickAnswer() called
  â†“
Visual feedback shown (green/red)
  â†“
Score updated if correct
  â†“
User clicks "Next"
  â†“
goToNextQuestion() called
  â†“
Next question displayed
  â†“
Repeat until last question
  â†“
User clicks "Finish"
  â†“
Navigate to /result/:score
  â†“
ResultScreen displays:
  - Total score
  - Percentage
  - Circular progress indicator
```

---

## ğŸ¯ Feature Deep Dive

### Camera Interview Feature

**Purpose**: Simulate realistic interview with AI asking questions and evaluating answers

**Key Components**:
- `CameraInterview` - Main page widget
- `CameraInterviewBloc` - State management
- `GeminiRepository` - AI communication
- `TtsLogic` - Text-to-speech functionality

**Prompt Engineering**:
```
The AI is instructed to:
1. Act as professional interviewer
2. Ask TTS-friendly questions
3. Provide contextual follow-ups
4. Generate comprehensive report on "End Interview"
```

**State Flow**:
```
CameraInterviewInitial
  â†“
CameraInterviewLoadingState
  â†“
CameraInterviewLoadingSuccessState (with question)
  â†“
[User answers]
  â†“
CameraInterviewLoadingState
  â†“
CameraInterviewLoadingSuccessState (next question)
  â†“
[Repeat]
  â†“
CameraInterviewResultState (final report)
```

### Talk to AI Feature

**Purpose**: Casual conversational practice with AI

**Key Differences from Camera Interview**:
- More casual, friendly tone
- No formal interview structure
- Shorter, concise responses
- No TTS (text-only)

**Conversation Memory**:
Both user and AI messages are stored in `_contents` array, maintaining full context for intelligent responses.

### MCQ Quiz Feature

**Purpose**: Quick assessment with multiple choice questions

**Implementation**:
- Uses local state (StatefulWidget) instead of BLoC
- Simple enough to not require complex state management
- Instant visual feedback on answer selection

**Scoring Logic**:
```dart
if (selectedAnswerIndex == question.correctAnswerIndex) {
  score++;
}
```

---

## ğŸ”§ State Management

### BLoC Pattern Implementation

**Events** â†’ User actions that trigger state changes
```dart
// Example: Camera Interview Events
StartCameraInterviewButtonTappedEvent
CandidateAnswerSubmittedEvent
SpeakTtsEvent
```

**States** â†’ UI representations
```dart
// Example: Camera Interview States
CameraInterviewInitial
CameraInterviewLoadingState
CameraInterviewLoadingSuccessState
CameraInterviewResultState
```

**BLoC** â†’ Business logic processor
```dart
// Handles events and emits states
on<Event>((event, emit) {
  // Process event
  // Call repository
  // Emit new state
});
```

### State Types

1. **Regular States**: Trigger UI rebuild
   - `HomeInitial`
   - `CameraInterviewLoadingState`
   - `MessageSentSuccessState`

2. **Action States**: Trigger one-time actions (navigation)
   - `CameraInterviewActionState`
   - `StartTalkToAiActionState`
   - `McqActionState`

---

## ğŸ¤– AI Integration

### Gemini API Communication

**Endpoint**:
```
https://generativelanguage.googleapis.com/v1beta/models/gemini-3-flash-preview:generateContent
```

**Request Format**:
```json
{
  "contents": [
    {
      "role": "user",
      "parts": [{"text": "message"}]
    },
    {
      "role": "model",
      "parts": [{"text": "response"}]
    }
  ]
}
```

**Response Parsing**:
```
response.body
  â†’ candidates[]
    â†’ content
      â†’ parts[]
        â†’ text (extracted)
```

### Conversation Context

The `_contents` array maintains full conversation history:
```dart
[
  {"role": "user", "parts": [{"text": "system prompt"}]},
  {"role": "model", "parts": [{"text": "first question"}]},
  {"role": "user", "parts": [{"text": "answer 1"}]},
  {"role": "model", "parts": [{"text": "follow-up question"}]},
  // ... continues
]
```

This enables:
- Contextual follow-up questions
- Intelligent conversation flow
- Personalized feedback

---

## ğŸ“ File Structure

```
lib/
â”œâ”€â”€ main.dart                          # App entry point
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ routes.dart                    # Navigation configuration
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â””â”€â”€ constants.dart             # Global constants (API key)
â”‚   â”œâ”€â”€ extensions/
â”‚   â”‚   â””â”€â”€ sized_box_extension.dart   # Spacing utilities
â”‚   â””â”€â”€ widgets/
â”‚       â””â”€â”€ my_elevated_button.dart    # Reusable button
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ home_page/
â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â””â”€â”€ home.dart              # Landing page
â”‚   â”‚   â””â”€â”€ bloc/
â”‚   â”‚       â”œâ”€â”€ home_bloc.dart         # Home logic
â”‚   â”‚       â”œâ”€â”€ home_event.dart        # Home events
â”‚   â”‚       â””â”€â”€ home_state.dart        # Home states
â”‚   â”œâ”€â”€ camera_interview_page/
â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â””â”€â”€ camera_interview.dart  # Interview UI
â”‚   â”‚   â”œâ”€â”€ bloc/
â”‚   â”‚   â”‚   â”œâ”€â”€ camera_interview_bloc.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ camera_interview_event.dart
â”‚   â”‚   â”‚   â””â”€â”€ camera_interview_state.dart
â”‚   â”‚   â”œâ”€â”€ repo/
â”‚   â”‚   â”‚   â””â”€â”€ gemini_repo.dart       # AI communication
â”‚   â”‚   â”œâ”€â”€ logic/
â”‚   â”‚   â”‚   â””â”€â”€ tts_logic.dart         # Text-to-speech
â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚       â””â”€â”€ gemini_response_model.dart
â”‚   â”œâ”€â”€ talk_to_ai_page/
â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â”œâ”€â”€ start_talk_to_ai.dart  # Chat UI
â”‚   â”‚   â”‚   â”œâ”€â”€ message_loading_page.dart
â”‚   â”‚   â”‚   â””â”€â”€ message_success_page.dart
â”‚   â”‚   â”œâ”€â”€ bloc/
â”‚   â”‚   â”‚   â”œâ”€â”€ talk_to_ai_bloc.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ talk_to_ai_event.dart
â”‚   â”‚   â”‚   â””â”€â”€ talk_to_ai_state.dart
â”‚   â”‚   â””â”€â”€ repos/
â”‚   â”‚       â””â”€â”€ gemini_repository.dart
â”‚   â””â”€â”€ mcq_page/
â”‚       â”œâ”€â”€ screens/
â”‚       â”‚   â”œâ”€â”€ quiz_screen.dart       # Quiz UI
â”‚       â”‚   â””â”€â”€ result_screen.dart     # Score display
â”‚       â”œâ”€â”€ bloc/
â”‚       â”‚   â”œâ”€â”€ mcq_bloc.dart          # (Currently unused)
â”‚       â”‚   â”œâ”€â”€ mcq_event.dart
â”‚       â”‚   â””â”€â”€ mcq_state.dart
â”‚       â”œâ”€â”€ models/
â”‚       â”‚   â””â”€â”€ question.dart          # Question model
â”‚       â””â”€â”€ widgets/
â”‚           â”œâ”€â”€ answer_card.dart       # Answer option
â”‚           â””â”€â”€ next_button.dart       # Navigation button
```

---

## ğŸš€ Future Enhancements

### High Priority TODOs

1. **Camera Interview**
   - [ ] Implement actual camera/video recording
   - [ ] Add speech-to-text for voice input
   - [ ] Create dedicated result page with detailed feedback
   - [ ] Add voice customization (speed, pitch, language)

2. **Talk to AI**
   - [ ] Add message history persistence
   - [ ] Implement typing indicators
   - [ ] Add message timestamps
   - [ ] Conversation export feature

3. **MCQ Quiz**
   - [ ] Add timer for each question
   - [ ] Implement question shuffling
   - [ ] Add difficulty levels
   - [ ] Store quiz history
   - [ ] Fetch questions from API

4. **General**
   - [ ] Implement proper API key management (environment variables)
   - [ ] Add retry logic for failed API calls
   - [ ] Implement rate limiting
   - [ ] Add error handling and user feedback
   - [ ] Create tablet-specific layouts
   - [ ] Add dark/light theme support
   - [ ] Implement analytics and tracking

### Architecture Improvements

1. **Security**
   - Use flutter_dotenv for API key management
   - Implement secure storage for sensitive data
   - Add API request encryption

2. **Performance**
   - Cache common AI responses
   - Implement lazy loading for questions
   - Optimize image assets

3. **Testing**
   - Add unit tests for BLoCs
   - Add widget tests for UI components
   - Add integration tests for complete flows

4. **Code Quality**
   - Refactor GeminiRepository to use response models
   - Extract common UI components
   - Implement dependency injection
   - Add code documentation

---

## ğŸ“ Key Takeaways

### What Makes This App Unique

1. **Prompt Engineering**: Carefully crafted prompts ensure AI behaves as professional interviewer
2. **Context Maintenance**: Full conversation history enables intelligent follow-ups
3. **Multiple Practice Modes**: Caters to different learning styles
4. **Responsive Design**: Works across mobile, tablet, and desktop
5. **Clean Architecture**: BLoC pattern ensures maintainable, testable code

### Learning Points

- **BLoC Pattern**: Separation of business logic from UI
- **AI Integration**: Working with conversational AI APIs
- **State Management**: Handling complex state transitions
- **Responsive Design**: flutter_screenutil for cross-device compatibility
- **Navigation**: GoRouter for declarative routing

---

**Last Updated**: February 14, 2026
**Version**: 0.1.0
**Maintainer**: Prem Dilliwar
